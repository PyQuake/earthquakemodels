---
title: "Paired Desing"
author: "Yuri Lavinas"
date: "May 27, 2016"
output:
  pdf_document:
    fig_caption: yes
    fig_crop: no
    toc: yes
---
```{r setup, include=FALSE}
library(knitr)
# clean workspace
rm(list=ls())
setwd("~/Documents/estudos/unb/earthquakemodels/Zona2/dataFromR")
#Loading data
load("newdata.Rda")
```

## Statistical Analysis

Agora faço o Paired Design t.test aplicando para todas as combinações possíveis de modelos, em todas as regiões e profundidades, para todos os anos.

Baseado nos arquivos que explicam o Paired Desing, escrevi o código a seguir. Porém não entendi porque ao fazer desta forma pode ser considerado um teste pareado. Os slides comparam duas formas de realizar este tipo de teste. Uma delas tem 
*seta* um parametro da função com **True**, explicitando que é um teste pareado. Já para o outra forma, esse parametro fica com **False**.


```{r}
summary(finalData)
# Summarize the n=30 repeated measures on each Problem:Algorithm combination by their mean value
ttestPaired= function(region){
    subTabela = finalData[finalData$depths==25&finalData$regions==region,]
    aggfinaldata<-aggregate(loglikeValues~years:model, data=subTabela,FUN=mean)
    # Perform paired t-test
    cat('in', region, 'the t.test between the models gaModel and lista is: ')
    difTimes<-with(aggfinaldata,loglikeValues[1:6]-loglikeValues[7:12])
    print(t.test(difTimes))
    cat('in', region, 'the t.test between the models gaModel and hybrid_gaModel is: ')
    difTimes<-with(aggfinaldata,loglikeValues[1:6]-loglikeValues[13:18])
    print(t.test(difTimes))
    cat('in', region, 'the t.test between the models gaModel and hybrid_listaGA_New is: ')
    difTimes<-with(aggfinaldata,loglikeValues[1:6]-loglikeValues[19:24])
    print(t.test(difTimes))
    cat('in', region, 'the t.test between the models gaModel and gaModelCluster is: ')
    difTimes<-with(aggfinaldata,loglikeValues[1:6]-loglikeValues[25:30])
    print(t.test(difTimes))
    cat('in', region, 'the t.test between the models gaModel and listaCluster is: ')
    difTimes<-with(aggfinaldata,loglikeValues[1:6]-loglikeValues[31:36])
    print(t.test(difTimes))
}

    ttestPaired('Kansai')
    ttestPaired('Tohoku')
    ttestPaired('EastJapan')
    ttestPaired('Kanto')
```

## Statistical Analysis - Checking Results

Como fiquei bastante em dúvida em relação a forma como fiz os testes, tentei um outra abordagem.
Como obtive resultados iguais para um caso de teste, entendi que são iguais. 

Ambas abordagens são baseadas no slides do Felipe Campelo, que o Claus enviou.

```{r include=FALSE}
# rm(list=ls())
# setwd("~/Documents/estudos/unb/earthquakemodels/Zona2/dataFromR")
# #Loading data
# load("newdata.Rda")
# aggdata<-aggregate(loglikeValues~model:regions:years:depths,data=finalData,FUN=mean)
# aggdata=aggdata[aggdata$regions=='Kanto'&aggdata$
#                     years==2005&
#                     (aggdata$model=='gaModel'|aggdata$model=='lista'),]
# list_logValues=aggdata[aggdata$model=='lista',]$loglikeValues
# gaModel_logValues=aggdata[aggdata$model=='gaModel',]$loglikeValues
# t.testWithPaired=t.test(x=list_logValues,y=gaModel_logValues, paired=T)
# print(t.testWithPaired)
# 
# subTabela = finalData[finalData$regions=='Kanto',]
# aggfinaldata<-aggregate(loglikeValues~depths:model, data=subTabela,FUN=mean)
# difTimes<-with(aggfinaldata,loglikeValues[1:3]-loglikeValues[ 4:6])
# t.testWithoutPaired=t.test(difTimes)
# print(t.testWithoutPaired)
```


# Conclusions

To explore the results and conclusions from the tests from the ANOVA, we applied a paired Student's t test. 



